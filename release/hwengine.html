<!doctypehtml><html><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1"name=viewport><title>Hedgewars Engine</title><style>body,html{margin:0;width:100%;height:100%;overflow:hidden;background:#0a0e14}#canvas{width:100vw;height:100vh;display:block}#status{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#9fd7ff;font:600 20px system-ui,sans-serif;text-align:center}</style></head><body><div id=status>Loading engine...</div><canvas id=canvas></canvas><script>var statusEl=document.getElementById("status");!function(){if("serviceWorker"in navigator)try{var e=new URL("sw.js",window.location.href).href,n=new URL("./",window.location.href).pathname;navigator.serviceWorker.register(e,{scope:n}).catch((function(){}))}catch(e){}}();var cfgParam=new URLSearchParams(window.location.search).get("cfg"),cfgB64=cfgParam||localStorage.getItem("hw-wasm-webcfg64")||"";function frontendUrl(){return window.location.pathname.replace(/\/hwengine\.html$/,"")+"/web-frontend/"}cfgB64||(statusEl.textContent="No game configuration provided.");var didRequestFrontendReturn=!1;function returnToFrontend(e){didRequestFrontendReturn||(didRequestFrontendReturn=!0,console.log("[engine] returning to frontend:",e||"exit"),window.location.href=frontendUrl())}function getEngineAudioArgs(){var e={engineVolume:100,engineSoundEnabled:!0,engineMusicEnabled:!0,musicVolume:70,sfxVolume:80},n=e;try{var t=localStorage.getItem("hw.settings");if(t){var o=JSON.parse(t);n=Object.assign({},e,o||{})}}catch(e){}function r(e,n){var t=Number(e);return Number.isFinite(t)?Math.max(0,Math.min(100,Math.round(t))):n}var a=r(n.engineVolume,Math.max(r(n.musicVolume,e.musicVolume),r(n.sfxVolume,e.sfxVolume))),i=!1!==n.engineSoundEnabled,u=!1!==n.engineMusicEnabled,s=["--volume",String(Math.floor(128*a/100))];return u||s.push("--nomusic"),i||s.push("--nosound"),s}var engineAudioArgs=getEngineAudioArgs();function shouldStartInFullscreen(){try{var e=localStorage.getItem("hw.settings");if(!e)return!1;var n=JSON.parse(e);return n&&!0===n.startInFullscreen}catch(e){return!1}}function maybeEnterFullscreen(){if(shouldStartInFullscreen()&&!document.fullscreenElement){var e=document.getElementById("canvas");e&&e.requestFullscreen&&e.requestFullscreen().then((function(){window.removeEventListener("pointerdown",maybeEnterFullscreen),window.removeEventListener("keydown",maybeEnterFullscreen)})).catch((function(){}))}}function buildArgs(e){for(var n=["--prefix","/Data","--user-prefix","/"].concat(engineAudioArgs),t=0;t<e.length;t+=200)n.push("--webcfg64"),n.push(e.slice(t,t+200));return n}!function(){if("object"==typeof window&&"function"==typeof window.fetch&&!window.__hwSplitDataFetchHookInstalled){window.__hwSplitDataFetchHookInstalled=!0;var e=window.fetch.bind(window);window.fetch=function(n,t){var o="string"==typeof n?n:n&&"string"==typeof n.url?n.url:"";return function(e){var n=String(e||"");return/(^|\/)hwengine\.data([?#].*)?$/.test(n)}(o)?async function(){var r=await async function(n){var t=n+".part0",o=await e(t);if(!o.ok){if(404===o.status||410===o.status)return null;throw new Error(String(o.status)+": "+o.url)}async function r(e,n){if(e.body&&"function"==typeof e.body.getReader)for(var t=e.body.getReader();;){var o=await t.read();if(o.done)break;n.enqueue(o.value)}else{var r=await e.arrayBuffer();n.enqueue(new Uint8Array(r))}}var a=new ReadableStream({start:async function(t){try{await r(o,t);for(var a=1;;a++){var i=n+".part"+a,u=await e(i);if(!u.ok){if(404===u.status||410===u.status)break;throw new Error(String(u.status)+": "+u.url)}await r(u,t)}t.close()}catch(e){t.error(e)}}});return new Response(a,{headers:{"Content-Type":"application/octet-stream"}})}(o);return r||e(n,t)}():e(n,t)}}}();var Module={canvas:document.getElementById("canvas"),noInitialRun:!0,arguments:["--prefix","/Data","--user-prefix","/"].concat(engineAudioArgs),print:function(e){console.log(e)},printErr:function(e){console.error(e)},setStatus:function(e){statusEl.textContent=e||"",e||(statusEl.style.display="none")},monitorRunDependencies:function(e){e?Module.setStatus("Loading data..."):Module.setStatus("")},onExit:function(e){console.log("[engine] onExit status=",e),returnToFrontend("onExit")},onAbort:function(e){console.error("[engine] abort:",e),returnToFrontend("onAbort")},onRuntimeInitialized:function(){if(Module.setStatus(""),cfgB64){var e=buildArgs(cfgB64);console.log("[engine] launching with",e.length,"args"),Module.callMain(e)}}};function unlockAudio(){try{Module.SDL2&&Module.SDL2.audioContext&&"suspended"===Module.SDL2.audioContext.state&&Module.SDL2.audioContext.resume()}catch(e){}window.removeEventListener("pointerdown",unlockAudio),window.removeEventListener("keydown",unlockAudio)}window.addEventListener("pointerdown",unlockAudio),window.addEventListener("keydown",unlockAudio),window.addEventListener("pointerdown",maybeEnterFullscreen),window.addEventListener("keydown",maybeEnterFullscreen)</script><script async src=hwengine.js></script></body></html>